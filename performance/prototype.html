<html>
<head>
	<title>prototype</title>
	<meta charset="UTF-8">
	<style type="text/css">
		@import url(http://fonts.googleapis.com/earlyaccess/kopubbatang.css);
		html,body{
			width: 100%;
			height: 100%;
		}
		textarea{
			position: absolute;
			margin: auto;
			top: 0;
			bottom: 0;
			left: 0;
			right: 0;
			width: 600px;
			height: 350px;
			font-family: 'KoPub Batang', serif;
			font-size: 25px;
		}
	</style>
</head>
<body>
	<textarea id="input"></textarea>
	<button id="splitChars">convert</button>

	<script type="text/javascript" src="./toKorChars.js"></script>
	<script type="text/javascript" src="./rule.js"></script>
	<script type="text/javascript">
		var convertButton = document.getElementById("splitChars");
		var textInput = document.getElementById("input");
		convertButton.addEventListener("click", function(){
			var result = textInput.value.toKorChars();
			// console.log(result);
			var converted = convertToNotes(result);
			var xmlTemplate = '<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE score-partwise PUBLIC "-//Recordare//DTD MusicXML 3.0 Partwise//EN" "http://www.musicxml.org/dtds/partwise.dtd"><score-partwise version="3.0"><part-list><score-part id="P1"><part-name>Music</part-name></score-part></part-list><part id="P1"><measure number="1"><attributes><divisions>1</divisions><key><fifths>0</fifths></key><time><beats>4</beats><beat-type>4</beat-type></time><clef><sign>G</sign><line>2</line></clef></attributes><%convertedNotes%></measure></part></score-partwise>';
			var musicXml = xmlTemplate.replace("<%convertedNotes%>", converted);
			console.log(musicXml);
			textInput.value = musicXml;
		});
	</script>
</body>
</html>